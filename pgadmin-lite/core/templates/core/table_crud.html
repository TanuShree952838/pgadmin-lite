{% extends 'core/base.html' %}
{% load custom_filters %}

{% block title %}Table: {{ table_name }}{% endblock %}

{% block content %}
<h2 class="mb-4">Table: {{ table_name }}</h2>

{% if columns and rows %}
<div class="table-responsive">
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                {% for col in columns %}
                    <th>{{ col }}</th>
                {% endfor %}
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
                <tr>
                    {% for col_idx in columns|length|make_range %}
                        <td>{{ row|get_index:col_idx }}</td>
                    {% endfor %}
                    <td>
                        {% if id_index is not None %}
                            {% with row|get_index:id_index as row_id %}
                                <a href="{% url 'update_record' table_name=table_name id=row_id %}" title="Edit">Edit</a> |
                                <a href="{% url 'delete_record' table_name=table_name id=row_id %}" title="Delete">Delete</a>
                            {% endwith %}
                        {% else %}
                            <span>N/A</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>No data available.</p>
{% endif %}

{% endblock %}
